{% extends 'base.html' %}

{% block content %}
<!-- Profile Header Section -->
<section class="py-5 text-center bg-gradient text-black" style="background: linear-gradient(to right, #00c6ff, #0072ff);">
  <div class="container">
    <h1 class="display-4 font-weight-bold">Welcome, {{ user.username }}!</h1>
    <p class="lead">Here are all your posts. Feel free to manage and update them anytime.</p>
  </div>
</section>

<!-- Profile Info Section -->
<div class="container my-5">
  <div class="row">
    <div class="col-md-4 text-center">
      <!-- Profile Picture -->
      <div class="mb-4">
        <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="rounded-circle" width="150" height="150">
      </div>
      <!-- Profile Details -->
      <h3 class="mb-3">{{ user.username }}</h3>
      <p class="text-muted">{{ user.email }}</p>
      <p class="text-muted">{{ user.first_name }} {{ user.last_name }}</p>
      <p class="text-muted">Bio: {{ user.profile.bio }}</p>
      <!-- Edit Profile & Logout Buttons -->
      <div class="mt-4">
        <a href="{% url 'update_profile' %}" class="btn btn-primary">Edit Profile</a>
        <a href="{% url 'logout' %}" class="btn btn-danger ml-2">Logout</a>
      </div>
    </div>

    <!-- User's Posts Section -->
    <div class="col-md-8">
      <h2 class="mb-4 text-center">Your Posts</h2>
      <div class="row">
        {% for post in data %}
        <div class="col-md-4 mb-4">
          <!-- Post Card -->
          <div class="card shadow-sm border-0 rounded-lg d-flex flex-column h-100">
            <!-- Post Image -->
            <img src="{{ post.image.url }}" class="card-img-top rounded-top" alt="Post Image" style="object-fit: cover; height: 200px;">
            
            <!-- Card Body -->
            <div class="card-body d-flex flex-column">
              <!-- Post Title -->
              <h5 class="card-title text-truncate" style="max-width: 100%">{{ post.title }}</h5>
              
              <!-- Post Content -->
              <p class="card-text text-muted" style="min-height: 70px;">{{ post.content|truncatewords:30 }}</p>
              
              <!-- Centered Read More Button -->
              <div class="d-flex justify-content-center mt-auto">
                <a href="#" class="btn btn-primary btn-sm mt-3 text-black" 
   style="background-color: transparent; border: 1px solid #689ed9; transition: all 0.3s ease;"
   onmouseover="this.style.backgroundColor='#007bff'; this.style.color='white';"
   onmouseout="this.style.backgroundColor='transparent'; this.style.color='black';">
   Read More
</a>

              </div>
            </div>

            <!-- Card Footer with Action Buttons -->
            <div class="card-footer text-muted text-center d-flex justify-content-center align-items-center">
              <!-- Button Container for Edit/Delete -->
              <div class="d-flex gap-3">
                <!-- Edit Button -->
                <a href="{% url 'edit_post' post.id %}" class="btn btn-warning btn-sm" style="background-color: transparent; border: 1px solid #ffc107; transition: all 0.3s ease;">Edit</a>
                
                <!-- Delete Button -->
                <a href="{% url 'delete_post' post.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this post?')" style="background-color: transparent; border: 1px solid #dc3545; transition: all 0.3s ease;">Delete</a>
              </div>
            </div>

            <!-- Post Date below buttons -->
            <div class="card-footer text-muted text-center">
              <small>Posted on {{ post.created_at|date:"F j, Y" }}</small>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12">
          <p class="text-center">You haven't posted anything yet. Start writing today!</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% endblock %}

